<?xml version="1.0" encoding="utf-8"?>
<TornadoEngine version="1.0" name="Bonobo">
  <Material name="Iron">
    <Graphic>
      <Variant><!-- выбор случайным образом текстуры в движке, что бы не было "близнецов"-->
        <LOD distance="100">
          <Property key="Color"  value="Iron_00.png"/>
          <Property key="Normal" value="NormalIron_00.png"/>
        </LOD>
        <LOD distance="1000">
          <Property key="Color"  value="Iron_00.png"/>
          <Property key="Normal" value="NormalIron_00.png"/>
        </LOD>
      </Variant>
      <Variant>
        <LOD distance="100">
          <Property key="Color"  value="Iron_01.png"/>
          <Property key="Normal" value="NormalIron_01.png"/>
        </LOD>
        <LOD distance="1000">
          <Property key="Color"  value="Iron_01.png"/>
          <Property key="Normal" value="NormalIron_01.png"/>
        </LOD>
      </Variant>
    </Graphic>
    <Physic>
      <Property key="Density"    value="7.6"/>
      <Property key="Elasticity" value="2.6"/>
      <Property key="Friction"   value="1.6"/>
    </Physic>
  </Material>
  <Shape name="PlateVarGeom">
    <Joining>
      <Joint name="0"> <!-- "Крючки", куда можно цепляться другими "крючками" -->
        <Position>
          <Property key="x" value="0"/>
          <Property key="y" value="0"/>
          <Property key="z" value="0"/>
        </Position>
        <Rotation>
          <Property key="x" value="0"/>
          <Property key="y" value="0"/>
          <Property key="z" value="0"/>
        </Rotation>
      </Joint>
    </Joining>
    <Geometry>
      <Property key="Type"     value="PlateVarGeom"/>
      <Property key="Height"   value="10.01"/>
      <Property key="Width"    value="11"/>
      <Property key="CntCoord" value="4"/>
      <Property key="Coord0"   value="0.0000012;0.0001212"/>
      <Property key="Coord1"   value="0;1.56"/>
      <Property key="Coord2"   value="1;1.3456"/>
      <Property key="Coord3"   value="1;-0.123"/>
    </Geometry>
    <Material name="Iron"/>
    <Paint use_nature_color="true"><!-- Для оптимизации - если полностью закрашен предмет, то цвет материала неважен. -->
      <Layer>
        <LOD distance="100">
          <Property key="Color"  value="a.png"/>
          <Property key="Normal" value="Normal_a.png"/>
        </LOD>
        <LOD distance="1000">
          <Property key="Color"  value="a.png"/>
          <Property key="Normal" value="Normal_a.png"/>
        </LOD>
      </Layer>
      <Layer>
        <LOD distance="100">
          <Property key="Color"  value="b.png"/>
          <Property key="Normal" value="Normal_b.png"/>
        </LOD>
        <LOD distance="1000">
          <Property key="Color"  value="b.png"/>
          <Property key="Normal" value="Normal_b.png"/>
        </LOD>
      </Layer>
    </Paint>
  </Shape>
  <Model name="Gear">
    <!-- Используемая модель может содержать в себе как Shape, так и готовые Model -->
    <!-- Задать видимость частей для физики (главный конвейер обрабатывает только коробку, остальные части
    находятся в обработчике, когда происходит коллизия коробки с другими объектами - идет вызов
    обработчика и проверяются коллизии с остальными частями). -->
    <Pattern name="Gear"/><!-- Поведение модели -->
    <Hierarchy><!-- Как части соединяются -->
      <Root name="root">
        <Position>
          <Property key="x" value="1"/>
          <Property key="y" value="2"/>
          <Property key="z" value="3"/>
        </Position>
        <Rotation>
          <Property key="x" value="1"/>
          <Property key="y" value="2"/>
          <Property key="z" value="3"/>
        </Rotation>
      </Root>
      <Formation>
        <Branch base="root"> <!-- Ветка, кто относительно кого соориентирован должен разобрать сериализатор -->
          <Bind>
            <Joint part="root"  name="0"/>
            <Joint part="part0" name="0"/>
            <Position>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Position>
            <Rotation>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Rotation>
          </Bind>
          <Constraint>
            <Property key="Type" value="Fixed"/>
            <Property key="BreakImpulse" value="1"/>
            <Property key="PointA_X" value="1"/>
            <Property key="PointA_Y" value="2"/>
            <Property key="PointA_Z" value="3"/>
            <Property key="PointB_X" value="4"/>
            <Property key="PointB_Y" value="5"/>
            <Property key="PointB_Z" value="6"/>
          </Constraint>    
        </Branch>
        <Branch base="part0">
          <Bind>
            <Joint part="part1" name="0"/>
            <Joint part="part0" name="0"/>
            <Position>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Position>
            <Rotation>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Rotation>
          </Bind>
          <Constraint>
            <Property key="Type" value="Fixed"/>
            <Property key="BreakImpulse" value="2"/>
            <Property key="PointA_X" value="1"/>
            <Property key="PointA_Y" value="2"/>
            <Property key="PointA_Z" value="3"/>
            <Property key="PointB_X" value="4"/>
            <Property key="PointB_Y" value="5"/>
            <Property key="PointB_Z" value="6"/>
          </Constraint>              
        </Branch>
      </Formation>
    </Hierarchy>
    <Collection><!-- Набор частей -->
      <Part name="root"><!-- Корень есть всегда -->
        <Joining>
          <Joint name="0"/><!-- Видим как снаружи, так и внутри модели для соединения между частями -->
        </Joining>
        <Incarnation>
          <Variant type="Model" name="ModelPlate">
            <Translation>
              <Joint external="0" part="root" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Scale>
          </Variant>
          <Variant type="Shape" name="PlateVarGeom" >
            <Material name="Wood"/> <!-- Переопределение материала, действует только для Shape -->
            <Translation>
              <Joint external="0" part="" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Scale>                 
          </Variant>
        </Incarnation>
      </Part>
      <Part name="part0">
        <Joining>
          <Joint name="1"/><!-- Видим как снаружи, так и внутри модели для соединения между частями -->
        </Joining>
        <Incarnation>
          <Variant type="Model" name="ModelPlate">
            <Translation>
              <Joint external="1" part="root" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="0"/>
              <Property key="y" value="0"/>
              <Property key="z" value="0"/>
            </Scale>
          </Variant>
          <Variant type="Shape" name="PlateVarGeom">
            <Material name="Wood"/> <!-- Переопределение материала, действует только для Shape -->
            <Translation>
              <Joint external="0" part="" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="0"/>
              <Property key="y" value="0"/>
              <Property key="z" value="0"/>
            </Scale>
          </Variant>
        </Incarnation>
      </Part>
      <Part name="part1">
        <Joining>
          <Joint name="1"/><!-- Видим как снаружи, так и внутри модели для соединения между частями -->
        </Joining>
        <Incarnation>
          <Variant type="Model" name="ModelPlate">
            <Translation>
              <Joint external="1" part="root" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="0"/>
              <Property key="y" value="0"/>
              <Property key="z" value="0"/>
            </Scale>
          </Variant>
          <Variant type="Shape" name="PlateVarGeom">
            <Material name="Wood"/> <!-- Переопределение материала, действует только для Shape -->
            <Translation>
              <Joint external="0" part="" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="0"/>
              <Property key="y" value="0"/>
              <Property key="z" value="0"/>
            </Scale>
          </Variant>
        </Incarnation>
      </Part>
    </Collection>
  </Model>
  <Terrain name="Grass">
    <!-- Карта высот -->
  </Terrain>
  <Map name="Field">
    <LightSource>
    </LightSource>
    <Objects>
    </Objects>
  </Map>
</TornadoEngine>