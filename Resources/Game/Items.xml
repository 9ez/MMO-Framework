<?xml version="1.0" encoding="utf-8"?>
<TornadoEngine version="1.0" name="Bonobo">
  <Material name="Iron">
    <Graphic>
      <Variant><!-- выбор случайным образом текстуры в движке, что бы не было "близнецов"-->
        <LOD distance="100">
					<Property key="Width"  value="1"/>
					<Property key="Length" value="1"/>
          <Property key="Color"  value="Iron_00.png"/>
          <Property key="Normal" value="NormalIron_00.png"/>
        </LOD>
        <LOD distance="1000">
					<Property key="Width"  value="1"/>
					<Property key="Length" value="1"/>
          <Property key="Color"  value="Iron_00.png"/>
          <Property key="Normal" value="NormalIron_00.png"/>
        </LOD>
      </Variant>
      <Variant>
        <LOD distance="100">
					<Property key="Width"  value="1"/>
					<Property key="Length" value="1"/>
          <Property key="Color"  value="Iron_01.png"/>
          <Property key="Normal" value="NormalIron_01.png"/>
        </LOD>
        <LOD distance="1000">
					<Property key="Width"  value="1"/>
					<Property key="Length" value="1"/>
          <Property key="Color"  value="Iron_01.png"/>
          <Property key="Normal" value="NormalIron_01.png"/>
        </LOD>
      </Variant>
    </Graphic>
    <Physic>
      <Property key="Density"    value="7.6"/>
      <Property key="Elasticity" value="2.6"/>
      <Property key="Friction"   value="1.6"/>
    </Physic>
  </Material>
  <Shape name="PlateVarGeom">
    <Joining>
      <Joint name="0"> <!-- "Крючки", куда можно цепляться другими "крючками" -->
        <Position>
          <Property key="x" value="0"/>
          <Property key="y" value="0"/>
          <Property key="z" value="0"/>
        </Position>
        <Rotation>
          <Property key="x" value="0"/>
          <Property key="y" value="0"/>
          <Property key="z" value="0"/>
        </Rotation>
      </Joint>
    </Joining>
    <Geometry>
      <Property key="Type"     value="PlateVarGeom"/>
      <Property key="Height"   value="10.01"/>
      <Property key="Width"    value="11"/>
      <Property key="CntCoord" value="4"/>
      <Property key="Coord0"   value="0.0000012;0.0001212"/>
      <Property key="Coord1"   value="0;1.56"/>
      <Property key="Coord2"   value="1;1.3456"/>
      <Property key="Coord3"   value="1;-0.123"/>
    </Geometry>
    <Material name="Iron"/>
    <Paint use_nature_color="true"><!-- Для оптимизации - если полностью закрашен предмет, то цвет материала неважен. -->
      <Layer>
        <LOD distance="100">
          <Property key="Color"  value="a.png"/>
          <Property key="Normal" value="Normal_a.png"/>
        </LOD>
        <LOD distance="1000">
          <Property key="Color"  value="a.png"/>
          <Property key="Normal" value="Normal_a.png"/>
        </LOD>
      </Layer>
      <Layer>
        <LOD distance="100">
          <Property key="Color"  value="b.png"/>
          <Property key="Normal" value="Normal_b.png"/>
        </LOD>
        <LOD distance="1000">
          <Property key="Color"  value="b.png"/>
          <Property key="Normal" value="Normal_b.png"/>
        </LOD>
      </Layer>
    </Paint>
  </Shape>
  <Model name="Gear">
    <!-- Используемая модель может содержать в себе как Shape, так и готовые Model -->
    <!-- Задать видимость частей для физики (главный конвейер обрабатывает только коробку, остальные части
    находятся в обработчике, когда происходит коллизия коробки с другими объектами - идет вызов
    обработчика и проверяются коллизии с остальными частями). -->
    <Pattern name="Gear"><!-- Поведение модели -->
			<Property key="Power" value="100"/><!-- Данные, адресованные объекту-паттерну -->
		</Pattern>
    <Hierarchy><!-- Как части соединяются -->
      <Root name="root">
        <Position>
          <Property key="x" value="1"/>
          <Property key="y" value="2"/>
          <Property key="z" value="3"/>
        </Position>
        <Rotation>
          <Property key="x" value="1"/>
          <Property key="y" value="2"/>
          <Property key="z" value="3"/>
        </Rotation>
      </Root>
      <Formation>
        <Branch base="root"> <!-- Ветка, кто относительно кого соориентирован должен разобрать сериализатор -->
          <Bind>
            <Joint part="root"  name="0"/>
            <Joint part="part0" name="0"/>
            <Position>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Position>
            <Rotation>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Rotation>
          </Bind>
          <Constraint>
            <Property key="Type" value="Fixed"/>
            <Property key="BreakImpulse" value="1"/>
            <Property key="PointA_X" value="1"/>
            <Property key="PointA_Y" value="2"/>
            <Property key="PointA_Z" value="3"/>
            <Property key="PointB_X" value="4"/>
            <Property key="PointB_Y" value="5"/>
            <Property key="PointB_Z" value="6"/>
          </Constraint>    
        </Branch>
        <Branch base="part0">
          <Bind>
            <Joint part="part1" name="0"/>
            <Joint part="part0" name="0"/>
            <Position>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Position>
            <Rotation>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Rotation>
          </Bind>
          <Constraint>
            <Property key="Type" value="Fixed"/>
            <Property key="BreakImpulse" value="2"/>
            <Property key="PointA_X" value="1"/>
            <Property key="PointA_Y" value="2"/>
            <Property key="PointA_Z" value="3"/>
            <Property key="PointB_X" value="4"/>
            <Property key="PointB_Y" value="5"/>
            <Property key="PointB_Z" value="6"/>
          </Constraint>              
        </Branch>
      </Formation>
    </Hierarchy>
    <Collection><!-- Набор частей -->
      <Part name="root"><!-- Корень есть всегда -->
        <Joining>
          <Joint name="0"/><!-- Видим как снаружи, так и внутри модели для соединения между частями -->
        </Joining>
        <Incarnation>
          <Variant type="Model" name="ModelPlate">
            <Translation>
              <Joint external="0" part="root" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Scale>
          </Variant>
          <Variant type="Shape" name="PlateVarGeom" >
            <Material name="Wood"/> <!-- Переопределение материала, действует только для Shape -->
            <Translation>
              <Joint external="0" part="" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="1"/>
              <Property key="y" value="2"/>
              <Property key="z" value="3"/>
            </Scale>                 
          </Variant>
        </Incarnation>
      </Part>
      <Part name="part0">
        <Joining>
          <Joint name="1"/><!-- Видим как снаружи, так и внутри модели для соединения между частями -->
        </Joining>
        <Incarnation>
          <Variant type="Model" name="ModelPlate">
            <Translation>
              <Joint external="1" part="root" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="0"/>
              <Property key="y" value="0"/>
              <Property key="z" value="0"/>
            </Scale>
          </Variant>
          <Variant type="Shape" name="PlateVarGeom">
            <Material name="Wood"/> <!-- Переопределение материала, действует только для Shape -->
            <Translation>
              <Joint external="0" part="" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="0"/>
              <Property key="y" value="0"/>
              <Property key="z" value="0"/>
            </Scale>
          </Variant>
        </Incarnation>
      </Part>
      <Part name="part1">
        <Joining>
          <Joint name="1"/><!-- Видим как снаружи, так и внутри модели для соединения между частями -->
        </Joining>
        <Incarnation>
          <Variant type="Model" name="ModelPlate">
            <Translation>
              <Joint external="1" part="root" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="0"/>
              <Property key="y" value="0"/>
              <Property key="z" value="0"/>
            </Scale>
          </Variant>
          <Variant type="Shape" name="PlateVarGeom">
            <Material name="Wood"/> <!-- Переопределение материала, действует только для Shape -->
            <Translation>
              <Joint external="0" part="" internal="0"/><!-- external должен совпадать с одним из имен Joint корня -->
            </Translation>
            <Scale>
              <Property key="x" value="0"/>
              <Property key="y" value="0"/>
              <Property key="z" value="0"/>
            </Scale>
          </Variant>
        </Incarnation>
      </Part>
    </Collection>
  </Model>
  <Terrain name="Grass">
    <Geometry>
      <Property key="Length"   value="1.01"/>
      <Property key="Width"    value="1.5"/>
    </Geometry>
		<Graphic>
		  <LOD distance="100">
				<Property key="Color"  value="ColorGrass00.png"/>
				<Property key="Normal" value="NormalGrass00.png"/>
			</LOD>
		  <LOD distance="1000">
				<Property key="Color"  value="ColorGrass01.png"/>
				<Property key="Normal" value="NormalGrass01.png"/>
			</LOD>
		</Graphic>
    <HeightMap><!-- Карта высот -->
		  <Point x="0" y="0" h="0" u="0" v="0"/>
		</HeightMap>
  </Terrain>
  <Map name="Field">
	  <TableSound name="0"/>
	  <Set><!-- Набор объектов сцены -->
		  <Object>
				<BaseProperty>
				  <Identity>
						<Property key="Type" value="Zone"/>
						<Property key="Name" value="Grass"/>
					</Identity>
					<Position><!-- Координаты центра -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Position>
					<Rotation><!-- Ориентация -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Rotation>
				</BaseProperty>
				<InternalState>
					<Property key="Type" value="GraphicEffect"/>
					<Property key="Height" value="10.01"/>				
					<Property key="CntCoord" value="4"/>
					<Property key="Coord0"   value="0.0000012;0.0001212"/>
					<Property key="Coord1"   value="0;1.56"/>
					<Property key="Coord2"   value="1;1.3456"/>
					<Property key="Coord3"   value="1;-0.123"/>
				</InternalState>
			</Object>
		  <Object>
				<BaseProperty>
				  <Identity>
						<Property key="Type" value="Skybox"/>
						<Property key="Name" value="Main"/>
					</Identity>
					<Position><!-- Координаты центра -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Position>
					<Rotation><!-- Ориентация -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Rotation>
				</BaseProperty>
				<InternalState>
				</InternalState>
			</Object>
		  <Object>
				<BaseProperty>
				  <Identity>
						<Property key="Type" value="Model"/>
						<Property key="Name" value="Gear"/>
					</Identity>
					<Position><!-- Координаты центра -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Position>
					<Rotation><!-- Ориентация -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Rotation>
				</BaseProperty>
				<InternalState>
				</InternalState>
			</Object>
		  <Object>
				<BaseProperty>
				  <Identity>
						<Property key="Type" value="Light"/>
						<Property key="Name" value="Point"/>
					</Identity>
					<Position><!-- Координаты центра -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Position>
					<Rotation><!-- Ориентация -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Rotation>
				</BaseProperty>
				<InternalState>
					<Property key="type" value="point"/>
				</InternalState>
			</Object>
		  <Object>
				<BaseProperty>
				  <Identity>
						<Property key="Type" value="Terrain"/>
						<Property key="Name" value="0_0"/>
					</Identity>
					<Position><!-- Координаты центра -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Position>
					<Rotation><!-- Ориентация -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Rotation>
				</BaseProperty>
				<InternalState>
				</InternalState>
			</Object>
		  <Object>
				<BaseProperty>
				  <Identity>
						<Property key="Type" value="Animated"/>
						<Property key="Name" value="BirdFly"/>
					</Identity>
					<Position><!-- Координаты центра -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Position>
					<Rotation><!-- Ориентация -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Rotation>
				</BaseProperty>
				<InternalState>
				</InternalState>
			</Object>
		  <Object>
				<BaseProperty>
				  <Identity>
						<Property key="Type" value="Sound"/><!-- Звук ветра в определенном месте. -->
						<Property key="Name" value="Wind"/>
					</Identity>
					<Position><!-- Координаты центра -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Position>
					<Rotation><!-- Ориентация -->
						<Property key="x" value="0"/>
						<Property key="y" value="0"/>
						<Property key="z" value="0"/>
					</Rotation>
				</BaseProperty>
				<InternalState>
				  <Property key="file" value="wind.mp3"/>
				</InternalState>
			</Object>
		</Set>
		<Scenario> <!-- Операции с объектами сцены -->
		</Scenario>
  </Map>
	<TableSound name="0">
		<Range>
      <Velocity><!-- Относительная скорость двух объектов -->
        <Property key="0" value="10"/>
        <Property key="1" value="20"/>
      </Velocity>
      <Angle>
        <Property key="0" value="45"/>
        <Property key="1" value="90"/>
      </Angle>
      <Mass>
        <Property key="0" value="100"/>
        <Property key="1" value="200"/>
      </Mass>
      <Material>
        <Property key="0" value="Iron"/><!-- Для материалов важен порядок индексации -->
        <Property key="1" value="Rock"/>
      </Material>
		</Range>
    <Collision>
      <Sound>
        <Combination>
          <Property key="Angle"    value="0"/>
          <Property key="Mass0"     value="0"/>
          <Property key="Mass1"     value="1"/>
          <Property key="Material0" value="0"/>
          <Property key="Material1" value="1"/>
          <Property key="Velocity" value="0"/>
        </Combination>
        <Param>
					<Variant>
						<Property key="file"   value="a.mp3"/>
						<Property key="gain"   value="0.8"/>
						<Property key="radius" value="100"/>
						<Property key="effect" value="echo"/>
					</Variant>
					<Variant>
						<Property key="file"   value="b.mp3"/>
						<Property key="gain"   value="0.8"/>
						<Property key="radius" value="100"/>
						<Property key="effect" value="echo"/>
					</Variant>
        </Param>
      </Sound>
      <Sound>
        <Combination>
          <Property key="Angle"    value="0"/>
          <Property key="Mass0"     value="0"/>
          <Property key="Mass1"     value="1"/>
          <Property key="Material0" value="0"/>
          <Property key="Material1" value="1"/>
          <Property key="Velocity" value="0"/>
        </Combination>
        <Param>
					<Variant>
						<Property key="file"   value="c.mp3"/>
						<Property key="gain"   value="0.8"/>
						<Property key="radius" value="100"/>
						<Property key="effect" value="echo"/>
					</Variant>
					<Variant>
						<Property key="file"   value="d.mp3"/>
						<Property key="gain"   value="0.8"/>
						<Property key="radius" value="100"/>
						<Property key="effect" value="echo"/>
					</Variant>
        </Param>
      </Sound>
    </Collision>
	</TableSound>
</TornadoEngine>